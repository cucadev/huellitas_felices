extends ../layout

block content
  .container
    .d-flex.justify-content-start.align-items-center.mb-3
      a.btn.btn-nuevo.me-2(href="/productos/nuevo")
        i.bi.bi-plus-circle
        |  Nuevo Producto
      a.btn.btn-secondary(href="/dashboard")
        i.bi.bi-house
        |  Inicio

    h1.mt-3 Productos

    if productos.length === 0
      p No hay productos registrados.
    else
      table.table.table-striped.table-bordered.mt-3
        thead
          tr
            th ID
            th Nombre
            th Proveedor
            th Costo Unitario
            th Unidad Venta
            th Categoría
            th Precio Venta
            th Stock Actual
            th Stock Mínimo
            th Acciones
        tbody
          each producto in productos
            tr
              td= producto._id
              td= producto.nombre
              td= producto.proveedor
              td $#{(producto.costoUnitario || 0).toFixed(2)}
              td= producto.unidadVenta
              td= producto.categoria
              td $#{(producto.precioVenta || 0).toFixed(2)}
              td= producto.stockActual
              td= producto.stockMinimo
              td
                a.btn.btn-warning.btn-sm.me-1(
                  href=`/productos/editar/${producto._id}`
                  title="Editar"
                )
                  i.bi.bi-pencil-square

                button.btn.btn-danger.btn-sm(
                  onclick=`confirmDelete('${producto._id}')`
                  title="Eliminar"
                )
                  i.bi.bi-trash

  script.
    function confirmDelete(id) {
      Swal.fire({
        title: "¿Eliminar producto?",
        text: "Esta acción no se puede deshacer",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#d33",
        cancelButtonColor: "#3085d6",
        confirmButtonText: "Sí, eliminar",
        cancelButtonText: "Cancelar"
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = "/productos/eliminar/" + id;
        }
      });
    }








